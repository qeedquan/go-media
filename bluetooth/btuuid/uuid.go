package btuuid

import (
	"bytes"
	"fmt"
)

type UUID [16]byte

// https://www.bluetooth.com/specifications/gatt/services/
var (
	BASE = UUID{
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x10, 0x00,
		0x80, 0x00, 0x00, 0x80, 0x5f, 0x9b, 0x34, 0xfb,
	}

	GAP = UUID{
		0x00, 0x00, 0x18, 0x00, 0x00, 0x00, 0x10, 0x00,
		0x80, 0x00, 0x00, 0x80, 0x5f, 0x9b, 0x34, 0xfb,
	}

	GATT = UUID{
		0x00, 0x00, 0x18, 0x01, 0x00, 0x00, 0x10, 0x00,
		0x80, 0x00, 0x00, 0x80, 0x5f, 0x9b, 0x34, 0xfb,
	}

	HEART_RATE = UUID{
		0x00, 0x00, 0x18, 0x0D, 0x00, 0x00, 0x10, 0x00,
		0x80, 0x00, 0x00, 0x80, 0x5f, 0x9b, 0x34, 0xfb,
	}

	HEART_RATE_MEASUREMENT = UUID{
		0x00, 0x00, 0x2A, 0x37, 0x00, 0x00, 0x10, 0x00,
		0x80, 0x00, 0x00, 0x80, 0x5f, 0x9b, 0x34, 0xfb,
	}

	HEART_RATE_BODY = UUID{
		0x00, 0x00, 0x2A, 0x38, 0x00, 0x00, 0x10, 0x00,
		0x80, 0x00, 0x00, 0x80, 0x5f, 0x9b, 0x34, 0xfb,
	}

	HEART_RATE_CTRL = UUID{
		0x00, 0x00, 0x2A, 0x39, 0x00, 0x00, 0x10, 0x00,
		0x80, 0x00, 0x00, 0x80, 0x5f, 0x9b, 0x34, 0xfb,
	}

	CURRENT_TIME = UUID{
		0x00, 0x00, 0x2A, 0x2B, 0x00, 0x00, 0x10, 0x00,
		0x80, 0x00, 0x00, 0x80, 0x5f, 0x9b, 0x34, 0xfb,
	}

	DATE_OF_BIRTH = UUID{
		0x00, 0x00, 0x2A, 0x85, 0x00, 0x00, 0x10, 0x00,
		0x80, 0x00, 0x00, 0x80, 0x5f, 0x9b, 0x34, 0xfb,
	}

	DEVICE_NAME = UUID{
		0x00, 0x00, 0x2A, 0x00, 0x00, 0x00, 0x10, 0x00,
		0x80, 0x00, 0x00, 0x80, 0x5f, 0x9b, 0x34, 0xfb,
	}

	LANGUAGE = UUID{
		0x00, 0x00, 0x2A, 0xA2, 0x00, 0x00, 0x10, 0x00,
		0x80, 0x00, 0x00, 0x80, 0x5f, 0x9b, 0x34, 0xfb,
	}

	WEIGHT = UUID{
		0x00, 0x00, 0x2A, 0x98, 0x00, 0x00, 0x10, 0x00,
		0x80, 0x00, 0x00, 0x80, 0x5f, 0x9b, 0x34, 0xfb,
	}
)

func (u UUID) String() string {
	return fmt.Sprintf("%02X%02X%02X%02X-%02X%02X-%02X%02X-%02X%02X-%02x%02X%02X%02X%02X%02X",
		u[0], u[1], u[2], u[3], u[4], u[5], u[6], u[7], u[8],
		u[9], u[10], u[11], u[12], u[13], u[14], u[15])
}

func (u UUID) Assigned() bool {
	return bytes.Compare(u[4:], BASE[4:]) == 0
}
